
{% extends "layout.html" %}

{% block title %}Discover{% endblock %}

{% block main %}
  <style>
    .discover-wrap { max-width: 760px; margin: 0 auto; }
    .dog-photo-wrap {
      width: 100%;
      max-width: 520px;
      aspect-ratio: 1/1;
      margin: 0 auto 1rem auto;
      border-radius: .75rem;
      overflow: hidden;
      border: 1px solid #e5e5e5;
      background: #f8f9fa;
    }

    .btn-like {
  background-color: #ff69b4; 
  color: white;
  border: none;
}
.btn-like:hover {
  background-color: #ff1493;
}
    
        .button-container {
            display: flex; 
            justify-content: center; 
            gap: 10px; 
            margin-top: 20px; 
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }
  
    .dog-photo { width: 100%; height: 100%; object-fit: cover; display: block; }
    .swipe-actions .btn { min-width: 130px; }
  </style>

  <div class="container py-4">
    <div class="discover-wrap">
      <h1 class="h3 text-center">Discover</h1>
      <hr>

      {% if dog %}
        <div class="dog-photo-wrap">
          {% if dog.photo %}
            <img class="dog-photo" src="{{ dog.photo }}" alt="{{ dog.name }}">
          {% else %}
            <img class="dog-photo" src="{{ url_for('static', filename='dogs/placeholder.jpg') }}" alt="Dog placeholder">
          {% endif %}
        </div>

        <div class="text-center mb-3">
          <h2 class="h4 mb-1">{{ dog.name }}</h2>
          <p class="text-secondary mb-2">
            {{ dog.age if dog.age is not none else "?" }}
            · {{ dog.gender or "—" }}
            · {{ dog.breed or "Mixed" }}
          </p>
          {% if dog.personality %}
            <p class="mb-2"><span class="badge text-bg-light">{{ dog.personality }}</span></p>
          {% endif %}
          {% if dog.bio %}
            <p class="mb-2">{{ dog.bio }}</p>
          {% endif %}
          <p class="small text-secondary mb-0">Owner: @{{ dog.username }}</p>
        </div>

        <form action="{{ url_for('swipe') }}" method="post" class="swipe-actions d-flex justify-content-center gap-2 mt-3">
          <input type="hidden" name="dog_id" value="{{ dog.id }}">
          <div class = "button-container">
          <button name="action" value="dislike" class="btn btn-outline-secondary" type="submit">Skip</button>
          <button name="action" value="like" class="btn btn-like" type="submit">Like</button>
          </div>
        </form>

      {% else %}
        <div class="text-center py-5">
          <h4 class="mb-2">You’re all caught up!</h4>
          <p class="text-secondary">No more dogs to discover right now.</p>
          <a class="btn btn-primary mt-2" href="{{ url_for('me') }}">View My Profile</a>
        </div>
      {% endif %}
    </div>
  </div>
{% endblock %}
